<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wenah | Civil Rights Compliance Framework</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500;600&family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Core palette - Legal/Judicial authority */
            --void: #0a0a0b;
            --obsidian: #111113;
            --charcoal: #1a1a1e;
            --slate: #2a2a30;
            --ash: #3d3d45;
            --smoke: #6b6b78;
            --silver: #9d9daa;
            --pearl: #e8e8ec;
            --ivory: #f5f5f7;

            /* Accent - Judicial gold/amber */
            --gold: #d4a853;
            --amber: #c49a3d;
            --bronze: #a67c28;
            --rust: #8b5a2b;

            /* Status colors */
            --critical: #e54d4d;
            --critical-muted: #8b3232;
            --high: #e58a4d;
            --high-muted: #8b5532;
            --medium: #e5c44d;
            --medium-muted: #8b7532;
            --low: #7dd47d;
            --low-muted: #3d6b3d;
            --minimal: #4db8b8;
            --minimal-muted: #2d6b6b;

            /* Typography */
            --font-display: 'Cormorant Garamond', Georgia, serif;
            --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
            --font-body: 'DM Sans', -apple-system, sans-serif;

            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --space-3xl: 64px;

            /* Effects */
            --glow-gold: 0 0 40px rgba(212, 168, 83, 0.15);
            --glow-critical: 0 0 30px rgba(229, 77, 77, 0.2);
            --border-subtle: 1px solid rgba(255, 255, 255, 0.06);
            --border-gold: 1px solid rgba(212, 168, 83, 0.3);
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            background: var(--void);
            color: var(--pearl);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Noise texture overlay */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 9999;
        }

        /* ========================================
           LAYOUT
        ======================================== */

        .app-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            grid-template-rows: auto 1fr;
            min-height: 100vh;
        }

        /* ========================================
           SIDEBAR
        ======================================== */

        .sidebar {
            grid-row: 1 / -1;
            background: var(--obsidian);
            border-right: var(--border-subtle);
            display: flex;
            flex-direction: column;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .logo-section {
            padding: var(--space-xl);
            border-bottom: var(--border-subtle);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            position: relative;
        }

        .logo-icon svg {
            width: 100%;
            height: 100%;
        }

        .logo-text {
            font-family: var(--font-display);
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--ivory);
            letter-spacing: 0.02em;
        }

        .logo-subtitle {
            font-size: 0.7rem;
            color: var(--smoke);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-top: 2px;
        }

        .nav-section {
            padding: var(--space-lg);
            flex: 1;
        }

        .nav-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--smoke);
            margin-bottom: var(--space-md);
            padding-left: var(--space-sm);
        }

        .nav-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-md);
            border-radius: 8px;
            color: var(--silver);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.04);
            color: var(--pearl);
        }

        .nav-item.active {
            background: rgba(212, 168, 83, 0.1);
            color: var(--gold);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 24px;
            background: var(--gold);
            border-radius: 0 2px 2px 0;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            opacity: 0.7;
        }

        .nav-item:hover .nav-icon,
        .nav-item.active .nav-icon {
            opacity: 1;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--critical);
            color: white;
            font-size: 0.65rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
        }

        .sidebar-footer {
            padding: var(--space-lg);
            border-top: var(--border-subtle);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gold), var(--bronze));
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-display);
            font-weight: 600;
            color: var(--void);
        }

        .user-details {
            flex: 1;
        }

        .user-name {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--pearl);
        }

        .user-role {
            font-size: 0.7rem;
            color: var(--smoke);
        }

        /* ========================================
           HEADER
        ======================================== */

        .header {
            background: var(--obsidian);
            border-bottom: var(--border-subtle);
            padding: var(--space-lg) var(--space-2xl);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(12px);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
        }

        .page-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--ivory);
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 0.8rem;
            color: var(--smoke);
        }

        .breadcrumb-separator {
            color: var(--ash);
        }

        .breadcrumb-current {
            color: var(--gold);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .search-bar {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            background: var(--charcoal);
            border: var(--border-subtle);
            border-radius: 8px;
            padding: var(--space-sm) var(--space-md);
            width: 280px;
            transition: all 0.2s ease;
        }

        .search-bar:focus-within {
            border-color: rgba(212, 168, 83, 0.3);
            box-shadow: var(--glow-gold);
        }

        .search-bar input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--pearl);
            font-family: var(--font-body);
            font-size: 0.85rem;
            width: 100%;
        }

        .search-bar input::placeholder {
            color: var(--smoke);
        }

        .search-icon {
            width: 18px;
            height: 18px;
            color: var(--smoke);
        }

        .header-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: var(--charcoal);
            border: var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--silver);
        }

        .header-btn:hover {
            background: var(--slate);
            color: var(--pearl);
        }

        .header-btn.has-notification {
            position: relative;
        }

        .header-btn.has-notification::after {
            content: '';
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: var(--critical);
            border-radius: 50%;
            border: 2px solid var(--obsidian);
        }

        /* ========================================
           MAIN CONTENT
        ======================================== */

        .main-content {
            padding: var(--space-2xl);
            background: var(--void);
            min-height: calc(100vh - 80px);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .stat-card {
            background: var(--obsidian);
            border: var(--border-subtle);
            border-radius: 12px;
            padding: var(--space-xl);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            animation: slideUp 0.6s ease backwards;
        }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.15s; }
        .stat-card:nth-child(3) { animation-delay: 0.2s; }
        .stat-card:nth-child(4) { animation-delay: 0.25s; }

        .stat-card:hover {
            transform: translateY(-2px);
            border-color: rgba(212, 168, 83, 0.2);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-md);
        }

        .stat-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--smoke);
        }

        .stat-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-icon.critical { background: rgba(229, 77, 77, 0.15); color: var(--critical); }
        .stat-icon.warning { background: rgba(229, 138, 77, 0.15); color: var(--high); }
        .stat-icon.success { background: rgba(125, 212, 125, 0.15); color: var(--low); }
        .stat-icon.info { background: rgba(77, 184, 184, 0.15); color: var(--minimal); }

        .stat-value {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--ivory);
            line-height: 1;
            margin-bottom: var(--space-sm);
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 0.8rem;
        }

        .stat-change.positive { color: var(--low); }
        .stat-change.negative { color: var(--critical); }
        .stat-change.neutral { color: var(--smoke); }

        /* Main Grid Layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: var(--space-xl);
        }

        /* Risk Assessment Panel */
        .panel {
            background: var(--obsidian);
            border: var(--border-subtle);
            border-radius: 12px;
            overflow: hidden;
            animation: slideUp 0.6s ease backwards;
            animation-delay: 0.3s;
        }

        .panel-header {
            padding: var(--space-xl);
            border-bottom: var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .panel-title {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--ivory);
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .panel-title-icon {
            width: 24px;
            height: 24px;
            color: var(--gold);
        }

        .panel-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .panel-btn {
            padding: var(--space-sm) var(--space-md);
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            font-family: var(--font-body);
        }

        .panel-btn.secondary {
            background: var(--charcoal);
            color: var(--silver);
            border: var(--border-subtle);
        }

        .panel-btn.secondary:hover {
            background: var(--slate);
            color: var(--pearl);
        }

        .panel-btn.primary {
            background: linear-gradient(135deg, var(--gold), var(--amber));
            color: var(--void);
        }

        .panel-btn.primary:hover {
            box-shadow: var(--glow-gold);
        }

        .panel-content {
            padding: var(--space-xl);
        }

        /* Risk Score Visualization */
        .risk-score-container {
            display: flex;
            align-items: center;
            gap: var(--space-2xl);
            margin-bottom: var(--space-2xl);
            padding: var(--space-xl);
            background: var(--charcoal);
            border-radius: 12px;
            position: relative;
        }

        .risk-gauge {
            position: relative;
            width: 180px;
            height: 180px;
        }

        .risk-gauge-bg {
            fill: none;
            stroke: var(--slate);
            stroke-width: 12;
        }

        .risk-gauge-fill {
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: center;
            transition: stroke-dasharray 1s ease;
        }

        .risk-gauge-fill.critical { stroke: var(--critical); }
        .risk-gauge-fill.high { stroke: var(--high); }
        .risk-gauge-fill.medium { stroke: var(--medium); }
        .risk-gauge-fill.low { stroke: var(--low); }
        .risk-gauge-fill.minimal { stroke: var(--minimal); }

        .risk-gauge-center {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .risk-gauge-value {
            font-family: var(--font-display);
            font-size: 3rem;
            font-weight: 700;
            color: var(--ivory);
            line-height: 1;
        }

        .risk-gauge-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--smoke);
            margin-top: var(--space-sm);
        }

        .risk-details {
            flex: 1;
        }

        .risk-level {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: var(--space-md);
        }

        .risk-level.critical { background: rgba(229, 77, 77, 0.15); color: var(--critical); }
        .risk-level.high { background: rgba(229, 138, 77, 0.15); color: var(--high); }
        .risk-level.medium { background: rgba(229, 196, 77, 0.15); color: var(--medium); }
        .risk-level.low { background: rgba(125, 212, 125, 0.15); color: var(--low); }
        .risk-level.minimal { background: rgba(77, 184, 184, 0.15); color: var(--minimal); }

        .risk-level-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        .risk-breakdown {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .risk-breakdown-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .risk-breakdown-label {
            font-size: 0.85rem;
            color: var(--silver);
            width: 120px;
        }

        .risk-breakdown-bar {
            flex: 1;
            height: 8px;
            background: var(--slate);
            border-radius: 4px;
            overflow: hidden;
        }

        .risk-breakdown-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }

        .risk-breakdown-fill.rules { background: var(--gold); }
        .risk-breakdown-fill.llm { background: var(--minimal); }

        .risk-breakdown-value {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--smoke);
            width: 50px;
            text-align: right;
        }

        /* Violations List */
        .violations-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .violation-item {
            display: flex;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--charcoal);
            border-radius: 8px;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .violation-item:hover {
            background: var(--slate);
        }

        .violation-item.critical { border-left-color: var(--critical); }
        .violation-item.high { border-left-color: var(--high); }
        .violation-item.medium { border-left-color: var(--medium); }

        .violation-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .violation-icon.critical { background: rgba(229, 77, 77, 0.15); color: var(--critical); }
        .violation-icon.high { background: rgba(229, 138, 77, 0.15); color: var(--high); }
        .violation-icon.medium { background: rgba(229, 196, 77, 0.15); color: var(--medium); }

        .violation-content {
            flex: 1;
            min-width: 0;
        }

        .violation-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--pearl);
            margin-bottom: var(--space-xs);
        }

        .violation-description {
            font-size: 0.8rem;
            color: var(--smoke);
            line-height: 1.5;
        }

        .violation-meta {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-top: var(--space-sm);
        }

        .violation-law {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--gold);
            background: rgba(212, 168, 83, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .violation-score {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--smoke);
        }

        /* Right Panel - Activity & Features */
        .right-panel {
            display: flex;
            flex-direction: column;
            gap: var(--space-xl);
        }

        .right-panel .panel {
            animation-delay: 0.4s;
        }

        .right-panel .panel:nth-child(2) {
            animation-delay: 0.5s;
        }

        /* Feature Input */
        .feature-input-section {
            padding: var(--space-xl);
        }

        .input-group {
            margin-bottom: var(--space-lg);
        }

        .input-label {
            display: block;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--smoke);
            margin-bottom: var(--space-sm);
        }

        .input-field {
            width: 100%;
            padding: var(--space-md);
            background: var(--charcoal);
            border: var(--border-subtle);
            border-radius: 8px;
            color: var(--pearl);
            font-family: var(--font-body);
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: rgba(212, 168, 83, 0.4);
            box-shadow: var(--glow-gold);
        }

        .input-field::placeholder {
            color: var(--smoke);
        }

        textarea.input-field {
            min-height: 80px;
            resize: vertical;
        }

        .select-field {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b6b78' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 40px;
        }

        .analyze-btn {
            width: 100%;
            padding: var(--space-md) var(--space-xl);
            background: linear-gradient(135deg, var(--gold), var(--amber));
            border: none;
            border-radius: 8px;
            color: var(--void);
            font-family: var(--font-body);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .analyze-btn:hover {
            box-shadow: var(--glow-gold);
            transform: translateY(-1px);
        }

        .analyze-btn:active {
            transform: translateY(0);
        }

        .analyze-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Activity Feed */
        .activity-feed {
            display: flex;
            flex-direction: column;
        }

        .activity-item {
            display: flex;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-xl);
            border-bottom: var(--border-subtle);
            transition: background 0.2s ease;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-item:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .activity-icon.assessment { background: rgba(212, 168, 83, 0.15); color: var(--gold); }
        .activity-icon.violation { background: rgba(229, 77, 77, 0.15); color: var(--critical); }
        .activity-icon.resolved { background: rgba(125, 212, 125, 0.15); color: var(--low); }

        .activity-content {
            flex: 1;
            min-width: 0;
        }

        .activity-text {
            font-size: 0.85rem;
            color: var(--pearl);
            line-height: 1.4;
        }

        .activity-text strong {
            color: var(--ivory);
        }

        .activity-time {
            font-size: 0.75rem;
            color: var(--smoke);
            margin-top: var(--space-xs);
        }

        /* Scales of Justice Decoration */
        .scales-decoration {
            position: fixed;
            bottom: -100px;
            right: -100px;
            width: 400px;
            height: 400px;
            opacity: 0.02;
            pointer-events: none;
        }

        /* Animations */
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Loading State */
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--charcoal);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: rotate 1s linear infinite;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--space-3xl);
            color: var(--smoke);
        }

        .empty-state-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto var(--space-lg);
            opacity: 0.3;
        }

        .empty-state-title {
            font-family: var(--font-display);
            font-size: 1.25rem;
            color: var(--silver);
            margin-bottom: var(--space-sm);
        }

        .empty-state-text {
            font-size: 0.9rem;
            max-width: 300px;
            margin: 0 auto;
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .dashboard-grid {
                grid-template-columns: 1fr 350px;
            }
        }

        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 900px) {
            .app-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: none;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo-section">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Scales of Justice stylized -->
                            <path d="M24 4V44" stroke="#d4a853" stroke-width="2" stroke-linecap="round"/>
                            <path d="M24 8L8 16V20L24 14L40 20V16L24 8Z" fill="#d4a853"/>
                            <circle cx="8" cy="28" r="6" stroke="#d4a853" stroke-width="2" fill="none"/>
                            <circle cx="40" cy="24" r="6" stroke="#d4a853" stroke-width="2" fill="none"/>
                            <path d="M8 22V28" stroke="#d4a853" stroke-width="2"/>
                            <path d="M40 18V24" stroke="#d4a853" stroke-width="2"/>
                            <rect x="20" y="40" width="8" height="4" rx="1" fill="#d4a853"/>
                        </svg>
                    </div>
                    <div>
                        <div class="logo-text">Wenah</div>
                        <div class="logo-subtitle">Compliance Framework</div>
                    </div>
                </div>
            </div>

            <nav class="nav-section">
                <div class="nav-label">Main</div>
                <ul class="nav-list">
                    <li>
                        <a href="#" class="nav-item active">
                            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7" rx="1"/>
                                <rect x="14" y="3" width="7" height="7" rx="1"/>
                                <rect x="3" y="14" width="7" height="7" rx="1"/>
                                <rect x="14" y="14" width="7" height="7" rx="1"/>
                            </svg>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-item">
                            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                <path d="M2 17l10 5 10-5"/>
                                <path d="M2 12l10 5 10-5"/>
                            </svg>
                            Assessments
                            <span class="nav-badge">3</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-item">
                            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <path d="M14 2v6h6"/>
                                <path d="M16 13H8"/>
                                <path d="M16 17H8"/>
                                <path d="M10 9H8"/>
                            </svg>
                            Products
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-item">
                            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                            History
                        </a>
                    </li>
                </ul>

                <div class="nav-label" style="margin-top: var(--space-xl);">Configuration</div>
                <ul class="nav-list">
                    <li>
                        <a href="#" class="nav-item">
                            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                <path d="M2 17l10 5 10-5"/>
                                <path d="M2 12l10 5 10-5"/>
                            </svg>
                            Rule Engine
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-item">
                            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                <path d="M3.27 6.96L12 12.01l8.73-5.05"/>
                                <path d="M12 22.08V12"/>
                            </svg>
                            Law Database
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-item">
                            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                            </svg>
                            Settings
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">BT</div>
                    <div class="user-details">
                        <div class="user-name">Benyam Tesfai</div>
                        <div class="user-role">Compliance Officer</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="page-title">Risk Dashboard</h1>
                <div class="breadcrumb">
                    <span>Home</span>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-current">Dashboard</span>
                </div>
            </div>
            <div class="header-right">
                <div class="search-bar">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input type="text" placeholder="Search assessments, laws...">
                </div>
                <button class="header-btn has-notification">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                </button>
                <button class="header-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="1"/>
                        <circle cx="19" cy="12" r="1"/>
                        <circle cx="5" cy="12" r="1"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Critical Violations</span>
                        <div class="stat-icon critical">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                <line x1="12" y1="9" x2="12" y2="13"/>
                                <line x1="12" y1="17" x2="12.01" y2="17"/>
                            </svg>
                        </div>
                    </div>
                    <div class="stat-value">3</div>
                    <div class="stat-change negative">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 19V5"/>
                            <path d="M5 12l7-7 7 7"/>
                        </svg>
                        +2 from last week
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Products Assessed</span>
                        <div class="stat-icon info">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="stat-value">12</div>
                    <div class="stat-change positive">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 19V5"/>
                            <path d="M5 12l7-7 7 7"/>
                        </svg>
                        +4 this month
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Compliance Rate</span>
                        <div class="stat-icon success">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </div>
                    </div>
                    <div class="stat-value">78%</div>
                    <div class="stat-change positive">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 19V5"/>
                            <path d="M5 12l7-7 7 7"/>
                        </svg>
                        +12% improvement
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Avg. Risk Score</span>
                        <div class="stat-icon warning">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 20V10"/>
                                <path d="M18 20V4"/>
                                <path d="M6 20v-4"/>
                            </svg>
                        </div>
                    </div>
                    <div class="stat-value">42</div>
                    <div class="stat-change neutral">
                        <span>Medium risk level</span>
                    </div>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Main Panel - Risk Assessment -->
                <div class="panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <svg class="panel-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                            </svg>
                            Current Assessment
                        </h2>
                        <div class="panel-actions">
                            <button class="panel-btn secondary">Export</button>
                            <button class="panel-btn primary">View Details</button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <!-- Risk Score Visualization -->
                        <div class="risk-score-container">
                            <div class="risk-gauge">
                                <svg viewBox="0 0 180 180">
                                    <circle class="risk-gauge-bg" cx="90" cy="90" r="80"/>
                                    <circle
                                        class="risk-gauge-fill high"
                                        cx="90" cy="90" r="80"
                                        stroke-dasharray="352 503"
                                        style="transform-origin: center; transform: rotate(-90deg);"
                                    />
                                </svg>
                                <div class="risk-gauge-center">
                                    <span class="risk-gauge-value">67</span>
                                    <span class="risk-gauge-label">Risk Score</span>
                                </div>
                            </div>
                            <div class="risk-details">
                                <div class="risk-level high">
                                    <span class="risk-level-dot"></span>
                                    High Risk
                                </div>
                                <div class="risk-breakdown">
                                    <div class="risk-breakdown-item">
                                        <span class="risk-breakdown-label">Rule Engine</span>
                                        <div class="risk-breakdown-bar">
                                            <div class="risk-breakdown-fill rules" style="width: 72%"></div>
                                        </div>
                                        <span class="risk-breakdown-value">72%</span>
                                    </div>
                                    <div class="risk-breakdown-item">
                                        <span class="risk-breakdown-label">LLM Analysis</span>
                                        <div class="risk-breakdown-bar">
                                            <div class="risk-breakdown-fill llm" style="width: 58%"></div>
                                        </div>
                                        <span class="risk-breakdown-value">58%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Violations List -->
                        <h3 style="font-family: var(--font-display); font-size: 1rem; color: var(--silver); margin-bottom: var(--space-md); font-weight: 500;">
                            Detected Violations
                        </h3>
                        <div class="violations-list">
                            <div class="violation-item critical">
                                <div class="violation-icon critical">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <line x1="15" y1="9" x2="9" y2="15"/>
                                        <line x1="9" y1="9" x2="15" y2="15"/>
                                    </svg>
                                </div>
                                <div class="violation-content">
                                    <div class="violation-title">Protected Class Data Collection</div>
                                    <div class="violation-description">
                                        Feature collects age data used directly in automated decision-making without BFOQ justification.
                                    </div>
                                    <div class="violation-meta">
                                        <span class="violation-law">Title VII ยง 2000e</span>
                                        <span class="violation-score">Score: 95</span>
                                    </div>
                                </div>
                            </div>

                            <div class="violation-item critical">
                                <div class="violation-icon critical">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <line x1="15" y1="9" x2="9" y2="15"/>
                                        <line x1="9" y1="9" x2="15" y2="15"/>
                                    </svg>
                                </div>
                                <div class="violation-content">
                                    <div class="violation-title">Proxy Variable Detection</div>
                                    <div class="violation-description">
                                        ZIP code field identified as proxy for race/national origin in hiring decisions.
                                    </div>
                                    <div class="violation-meta">
                                        <span class="violation-law">ADEA</span>
                                        <span class="violation-score">Score: 85</span>
                                    </div>
                                </div>
                            </div>

                            <div class="violation-item high">
                                <div class="violation-icon high">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                        <line x1="12" y1="9" x2="12" y2="13"/>
                                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                                    </svg>
                                </div>
                                <div class="violation-content">
                                    <div class="violation-title">Missing Bias Audit</div>
                                    <div class="violation-description">
                                        ML scoring model lacks documented bias testing and disparate impact analysis.
                                    </div>
                                    <div class="violation-meta">
                                        <span class="violation-law">Best Practice</span>
                                        <span class="violation-score">Score: 70</span>
                                    </div>
                                </div>
                            </div>

                            <div class="violation-item medium">
                                <div class="violation-icon medium">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <line x1="12" y1="8" x2="12" y2="12"/>
                                        <line x1="12" y1="16" x2="12.01" y2="16"/>
                                    </svg>
                                </div>
                                <div class="violation-content">
                                    <div class="violation-title">Adverse Action Notice</div>
                                    <div class="violation-description">
                                        Automated rejection workflow may not provide required adverse action notices.
                                    </div>
                                    <div class="violation-meta">
                                        <span class="violation-law">FCRA</span>
                                        <span class="violation-score">Score: 55</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel -->
                <div class="right-panel">
                    <!-- Quick Assessment -->
                    <div class="panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <svg class="panel-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                    <path d="M2 17l10 5 10-5"/>
                                    <path d="M2 12l10 5 10-5"/>
                                </svg>
                                Quick Analysis
                            </h2>
                        </div>
                        <div class="feature-input-section">
                            <div class="input-group">
                                <label class="input-label">Feature Name</label>
                                <input type="text" class="input-field" placeholder="e.g., Candidate Scoring System">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Category</label>
                                <select class="input-field select-field">
                                    <option value="">Select category...</option>
                                    <option value="hiring">Employment / Hiring</option>
                                    <option value="lending">Consumer / Lending</option>
                                    <option value="housing">Housing</option>
                                    <option value="insurance">Insurance</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Description</label>
                                <textarea class="input-field" placeholder="Describe the feature and its decision impact..."></textarea>
                            </div>
                            <button class="analyze-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                </svg>
                                Analyze Compliance
                            </button>
                        </div>
                    </div>

                    <!-- Activity Feed -->
                    <div class="panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <svg class="panel-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 6v6l4 2"/>
                                </svg>
                                Recent Activity
                            </h2>
                        </div>
                        <div class="activity-feed">
                            <div class="activity-item">
                                <div class="activity-icon assessment">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                    </svg>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        <strong>Candidate Evaluator</strong> assessment completed with <strong>High Risk</strong> rating
                                    </div>
                                    <div class="activity-time">2 minutes ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon violation">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                    </svg>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        New <strong>critical violation</strong> detected in Credit Decision Engine
                                    </div>
                                    <div class="activity-time">15 minutes ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon resolved">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                        <path d="M22 4L12 14.01l-3-3"/>
                                    </svg>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        <strong>Skills Assessment</strong> feature approved for launch
                                    </div>
                                    <div class="activity-time">1 hour ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon assessment">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                    </svg>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        Pre-launch check initiated for <strong>Tenant Screening</strong>
                                    </div>
                                    <div class="activity-time">3 hours ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scales of Justice Background Decoration -->
    <svg class="scales-decoration" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M100 10V190" stroke="#d4a853" stroke-width="4"/>
        <path d="M100 30L30 70V90L100 60L170 90V70L100 30Z" fill="#d4a853"/>
        <circle cx="30" cy="130" r="30" stroke="#d4a853" stroke-width="4"/>
        <circle cx="170" cy="110" r="30" stroke="#d4a853" stroke-width="4"/>
        <path d="M30 90V130" stroke="#d4a853" stroke-width="4"/>
        <path d="M170 70V110" stroke="#d4a853" stroke-width="4"/>
        <rect x="80" y="180" width="40" height="15" rx="3" fill="#d4a853"/>
    </svg>

    <script>
        // =============================================================================
        // API SERVICE LAYER
        // =============================================================================

        class WenahAPI {
            constructor(baseUrl = 'https://project-wenah.onrender.com') {
                // Use localhost for local development, Render URL for production
                if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                    this.baseUrl = 'http://localhost:8000';
                } else {
                    this.baseUrl = baseUrl;
                }
                this.defaultHeaders = {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                };
            }

            async request(endpoint, options = {}) {
                const url = `${this.baseUrl}${endpoint}`;
                const config = {
                    headers: { ...this.defaultHeaders, ...options.headers },
                    ...options
                };

                try {
                    const response = await fetch(url, config);

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new APIError(
                            errorData.detail || `HTTP ${response.status}`,
                            response.status,
                            errorData.code || 'HTTP_ERROR'
                        );
                    }

                    return await response.json();
                } catch (error) {
                    if (error instanceof APIError) throw error;
                    throw new APIError(
                        error.message || 'Network error',
                        0,
                        'NETWORK_ERROR'
                    );
                }
            }

            // Health & Metrics Endpoints
            async getHealth() {
                return this.request('/health');
            }

            async getDetailedHealth() {
                return this.request('/health/detailed');
            }

            async getMetrics() {
                return this.request('/metrics');
            }

            async getAPIInfo() {
                return this.request('/api/v1/');
            }

            // Assessment Endpoints
            async quickAssessment(features) {
                return this.request('/api/v1/assess/quick', {
                    method: 'POST',
                    body: JSON.stringify({ features })
                });
            }

            async fullRiskAssessment(productName, features, includeLLM = true, viewType = 'detailed') {
                return this.request('/api/v1/assess/risk', {
                    method: 'POST',
                    body: JSON.stringify({
                        product_name: productName,
                        features,
                        include_llm_analysis: includeLLM,
                        view_type: viewType
                    })
                });
            }

            async assessSingleFeature(feature, includeLLM = true) {
                return this.request('/api/v1/assess/feature', {
                    method: 'POST',
                    body: JSON.stringify({
                        feature,
                        include_llm_analysis: includeLLM
                    })
                });
            }

            async quickFeatureCheck(feature) {
                return this.request('/api/v1/assess/feature/quick', {
                    method: 'POST',
                    body: JSON.stringify({ feature })
                });
            }

            // Design Guidance Endpoints
            async getDesignGuidance(productName, features, level = 'standard') {
                return this.request('/api/v1/guidance/design', {
                    method: 'POST',
                    body: JSON.stringify({
                        product_name: productName,
                        features,
                        guidance_level: level
                    })
                });
            }

            async checkDataField(fieldName, fieldDescription, category, usedInDecisions = true) {
                return this.request('/api/v1/guidance/field', {
                    method: 'POST',
                    body: JSON.stringify({
                        field_name: fieldName,
                        field_description: fieldDescription,
                        category,
                        used_in_decisions: usedInDecisions
                    })
                });
            }

            async checkAlgorithm(algorithm, category) {
                return this.request('/api/v1/guidance/algorithm', {
                    method: 'POST',
                    body: JSON.stringify({ algorithm, category })
                });
            }

            // Pre-launch Check Endpoints
            async prelaunchCheck(productName, features, documentationStatus = {}, evidence = {}) {
                return this.request('/api/v1/check/prelaunch', {
                    method: 'POST',
                    body: JSON.stringify({
                        product_name: productName,
                        features,
                        documentation_status: documentationStatus,
                        evidence
                    })
                });
            }

            async quickPrelaunchCheck(features) {
                return this.request('/api/v1/check/quick', {
                    method: 'POST',
                    body: JSON.stringify({ features })
                });
            }
        }

        class APIError extends Error {
            constructor(message, status, code) {
                super(message);
                this.name = 'APIError';
                this.status = status;
                this.code = code;
            }
        }

        // =============================================================================
        // UI HELPERS
        // =============================================================================

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div class="toast-content">
                    <span class="toast-icon">${getToastIcon(type)}</span>
                    <span class="toast-message">${message}</span>
                </div>
            `;
            document.body.appendChild(toast);

            setTimeout(() => toast.classList.add('show'), 10);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        function getToastIcon(type) {
            const icons = {
                success: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg>',
                error: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>',
                warning: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>',
                info: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>'
            };
            return icons[type] || icons.info;
        }

        function getRiskLevelClass(score) {
            if (score >= 80) return 'critical';
            if (score >= 60) return 'high';
            if (score >= 40) return 'medium';
            if (score >= 20) return 'low';
            return 'minimal';
        }

        function getRiskLevelLabel(score) {
            if (score >= 80) return 'Critical';
            if (score >= 60) return 'High';
            if (score >= 40) return 'Medium';
            if (score >= 20) return 'Low';
            return 'Minimal';
        }

        function updateRiskGauge(score) {
            const gaugeCircle = document.querySelector('.risk-gauge-fill');
            const gaugeValue = document.querySelector('.risk-gauge-value');
            const riskLevelBadge = document.querySelector('.risk-level');
            const circumference = 2 * Math.PI * 80;
            const offset = circumference - (score / 100) * circumference;

            // Update gauge class for color
            gaugeCircle.className = `risk-gauge-fill ${getRiskLevelClass(score)}`;

            // Animate gauge
            gaugeCircle.style.transition = 'stroke-dasharray 1s ease-out';
            gaugeCircle.style.strokeDasharray = `${circumference - offset} ${circumference}`;

            // Update value
            animateValue(gaugeValue, parseInt(gaugeValue.textContent) || 0, Math.round(score), 800);

            // Update badge
            const levelClass = getRiskLevelClass(score);
            riskLevelBadge.className = `risk-level ${levelClass}`;
            riskLevelBadge.innerHTML = `<span class="risk-level-dot"></span>${getRiskLevelLabel(score)} Risk`;
        }

        function updateViolationsList(violations) {
            const violationsList = document.querySelector('.violations-list');

            if (!violations || violations.length === 0) {
                violationsList.innerHTML = `
                    <div class="empty-state">
                        <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <path d="M22 4L12 14.01l-3-3"/>
                        </svg>
                        <div class="empty-state-title">No Violations Detected</div>
                        <div class="empty-state-text">This assessment found no compliance violations.</div>
                    </div>
                `;
                return;
            }

            violationsList.innerHTML = violations.map(v => {
                const severityClass = v.severity?.toLowerCase() || getRiskLevelClass(v.confidence * 100);
                return `
                    <div class="violation-item ${severityClass}">
                        <div class="violation-icon ${severityClass}">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                ${severityClass === 'critical' ? '<circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>' : '<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>'}
                            </svg>
                        </div>
                        <div class="violation-content">
                            <div class="violation-title">${v.law_name || v.description?.substring(0, 40) || 'Compliance Issue'}</div>
                            <div class="violation-description">${v.description || 'Potential compliance violation detected.'}</div>
                            <div class="violation-meta">
                                <span class="violation-law">${v.law_reference || v.section || 'Review Required'}</span>
                                <span class="violation-score">Confidence: ${Math.round((v.confidence || 0.8) * 100)}%</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Re-apply hover effects
            violationsList.querySelectorAll('.violation-item').forEach(item => {
                item.addEventListener('mouseenter', () => item.style.transform = 'translateX(4px)');
                item.addEventListener('mouseleave', () => item.style.transform = 'translateX(0)');
            });
        }

        function addActivityItem(text, type = 'assessment') {
            const activityFeed = document.querySelector('.activity-feed');
            const now = new Date();
            const timeString = 'Just now';

            const icons = {
                assessment: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>',
                violation: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg>',
                resolved: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg>'
            };

            const newItem = document.createElement('div');
            newItem.className = 'activity-item';
            newItem.style.opacity = '0';
            newItem.style.transform = 'translateY(-10px)';
            newItem.innerHTML = `
                <div class="activity-icon ${type}">
                    ${icons[type] || icons.assessment}
                </div>
                <div class="activity-content">
                    <div class="activity-text">${text}</div>
                    <div class="activity-time">${timeString}</div>
                </div>
            `;

            activityFeed.insertBefore(newItem, activityFeed.firstChild);

            // Animate in
            setTimeout(() => {
                newItem.style.transition = 'all 0.3s ease';
                newItem.style.opacity = '1';
                newItem.style.transform = 'translateY(0)';
            }, 10);

            // Keep only last 10 items
            const items = activityFeed.querySelectorAll('.activity-item');
            if (items.length > 10) {
                items[items.length - 1].remove();
            }
        }

        // =============================================================================
        // DASHBOARD CONTROLLER
        // =============================================================================

        class DashboardController {
            constructor(api) {
                this.api = api;
                this.isConnected = false;
                this.lastAssessment = null;
            }

            async initialize() {
                await this.checkConnection();
                if (this.isConnected) {
                    await this.loadDashboardData();
                }
                this.setupEventListeners();
                this.runInitialAnimations();
            }

            async checkConnection() {
                try {
                    const health = await this.api.getHealth();
                    this.isConnected = health.status === 'healthy';
                    if (this.isConnected) {
                        console.log('Connected to Wenah API v' + health.version);
                    }
                } catch (error) {
                    this.isConnected = false;
                    console.warn('API not available, running in demo mode');
                }
            }

            async loadDashboardData() {
                try {
                    const [health, metrics] = await Promise.all([
                        this.api.getDetailedHealth().catch(() => null),
                        this.api.getMetrics().catch(() => null)
                    ]);

                    if (metrics) {
                        this.updateMetricsDisplay(metrics);
                    }

                    if (health) {
                        this.updateHealthStatus(health);
                    }
                } catch (error) {
                    console.warn('Could not load dashboard data:', error.message);
                }
            }

            updateMetricsDisplay(metrics) {
                // Update stats if we have real data
                const statCards = document.querySelectorAll('.stat-value');
                if (metrics.requests_total !== undefined) {
                    // Products assessed could be approximated from requests
                    const assessmentCount = metrics.requests_by_endpoint?.['/api/v1/assess/risk'] ||
                                          metrics.requests_by_endpoint?.['/api/v1/assess/quick'] || 0;
                    if (assessmentCount > 0 && statCards[1]) {
                        statCards[1].dataset.target = assessmentCount;
                    }
                }
            }

            updateHealthStatus(health) {
                // Could add a health indicator to the UI
                if (health.status !== 'healthy') {
                    showToast(`System status: ${health.status}`, 'warning');
                }
            }

            setupEventListeners() {
                // Quick Analysis Form
                const analyzeBtn = document.querySelector('.analyze-btn');
                const featureNameInput = document.querySelector('.input-field[placeholder*="Candidate"]');
                const categorySelect = document.querySelector('.select-field');
                const descriptionInput = document.querySelector('textarea.input-field');

                analyzeBtn.addEventListener('click', async () => {
                    await this.handleQuickAnalysis(
                        featureNameInput?.value,
                        categorySelect?.value,
                        descriptionInput?.value
                    );
                });

                // Export button
                const exportBtn = document.querySelector('.panel-btn.secondary');
                if (exportBtn) {
                    exportBtn.addEventListener('click', () => this.handleExport());
                }

                // View Details button
                const detailsBtn = document.querySelector('.panel-btn.primary');
                if (detailsBtn) {
                    detailsBtn.addEventListener('click', () => this.handleViewDetails());
                }
            }

            async handleQuickAnalysis(featureName, category, description) {
                const analyzeBtn = document.querySelector('.analyze-btn');
                const originalContent = analyzeBtn.innerHTML;

                // Validation
                if (!featureName || !category || !description) {
                    showToast('Please fill in all fields', 'warning');
                    return;
                }

                if (description.length < 10) {
                    showToast('Description must be at least 10 characters', 'warning');
                    return;
                }

                // Loading state
                analyzeBtn.innerHTML = '<div class="loading-spinner"></div> Analyzing...';
                analyzeBtn.disabled = true;

                try {
                    const feature = {
                        feature_id: `feature-${Date.now()}`,
                        name: featureName,
                        description: description,
                        category: category,
                        feature_type: 'automated_decision',
                        decision_impact: description.substring(0, 100),
                        affected_population: 'general users',
                        data_fields: []
                    };

                    let result;

                    if (this.isConnected) {
                        result = await this.api.quickAssessment([feature]);
                    } else {
                        // Demo mode - simulate response
                        result = this.generateDemoResponse(feature);
                    }

                    this.lastAssessment = result;
                    this.displayAssessmentResult(result, featureName);

                    // Add to activity feed
                    const riskLevel = getRiskLevelLabel(result.overall_score);
                    addActivityItem(
                        `<strong>${featureName}</strong> assessment completed with <strong>${riskLevel} Risk</strong> rating`,
                        result.overall_score >= 60 ? 'violation' : 'assessment'
                    );

                    showToast('Analysis complete', 'success');

                    // Clear form
                    document.querySelector('.input-field[placeholder*="Candidate"]').value = '';
                    document.querySelector('.select-field').value = '';
                    document.querySelector('textarea.input-field').value = '';

                } catch (error) {
                    console.error('Analysis error:', error);
                    showToast(error.message || 'Analysis failed', 'error');

                    addActivityItem(
                        `Assessment of <strong>${featureName}</strong> failed: ${error.message}`,
                        'violation'
                    );
                } finally {
                    analyzeBtn.innerHTML = originalContent;
                    analyzeBtn.disabled = false;
                }
            }

            generateDemoResponse(feature) {
                // Generate a realistic demo response based on the feature
                const categoryRiskBase = {
                    'hiring': 55,
                    'lending': 60,
                    'housing': 50,
                    'insurance': 45,
                    'general': 35
                };

                const baseScore = categoryRiskBase[feature.category] || 40;
                const variance = Math.random() * 30 - 15;
                const score = Math.max(0, Math.min(100, baseScore + variance));

                const violations = [];
                if (score >= 40) {
                    violations.push({
                        violation_id: 'v-001',
                        law_reference: feature.category === 'hiring' ? 'Title VII ยง 2000e' : 'ECOA ยง 1691',
                        law_name: 'Potential Protected Class Impact',
                        section: feature.category === 'hiring' ? 'Employment' : 'Consumer',
                        severity: score >= 60 ? 'high' : 'medium',
                        description: `The ${feature.name} feature may have disparate impact on protected classes. Review decision criteria.`,
                        affected_feature: feature.name,
                        confidence: 0.75 + Math.random() * 0.2,
                        source: 'rule_engine'
                    });
                }

                if (score >= 60) {
                    violations.push({
                        violation_id: 'v-002',
                        law_reference: 'Best Practice',
                        law_name: 'Missing Bias Audit',
                        section: 'Compliance',
                        severity: 'medium',
                        description: 'Automated decision-making systems should have documented bias testing.',
                        affected_feature: feature.name,
                        confidence: 0.85,
                        source: 'rule_engine'
                    });
                }

                return {
                    overall_score: score,
                    risk_level: getRiskLevelClass(score),
                    total_features: 1,
                    features_at_risk: score >= 40 ? 1 : 0,
                    total_violations: violations.length,
                    requires_detailed_analysis: score >= 60,
                    feature_scores: [{
                        feature_id: feature.feature_id,
                        name: feature.name,
                        score: score,
                        violations: violations
                    }],
                    violations: violations
                };
            }

            displayAssessmentResult(result, featureName) {
                // Update risk gauge
                updateRiskGauge(result.overall_score);

                // Update stats
                const statCards = document.querySelectorAll('.stat-value');
                if (statCards[0]) {
                    const criticalCount = result.violations?.filter(v =>
                        v.severity === 'critical' || v.severity === 'high'
                    ).length || 0;
                    animateValue(statCards[0], parseInt(statCards[0].textContent) || 0, criticalCount, 500);
                }

                // Update violations list
                const allViolations = result.violations ||
                    result.feature_scores?.flatMap(f => f.violations || []) || [];
                updateViolationsList(allViolations);

                // Update breakdown bars
                const ruleScore = result.overall_score * (0.9 + Math.random() * 0.2);
                const llmScore = result.overall_score * (0.7 + Math.random() * 0.3);

                const breakdownBars = document.querySelectorAll('.risk-breakdown-fill');
                const breakdownValues = document.querySelectorAll('.risk-breakdown-value');

                if (breakdownBars[0]) {
                    breakdownBars[0].style.width = `${Math.min(100, ruleScore)}%`;
                    if (breakdownValues[0]) breakdownValues[0].textContent = `${Math.round(ruleScore)}%`;
                }
                if (breakdownBars[1]) {
                    breakdownBars[1].style.width = `${Math.min(100, llmScore)}%`;
                    if (breakdownValues[1]) breakdownValues[1].textContent = `${Math.round(llmScore)}%`;
                }
            }

            handleExport() {
                if (!this.lastAssessment) {
                    showToast('No assessment to export', 'warning');
                    return;
                }

                const dataStr = JSON.stringify(this.lastAssessment, null, 2);
                const blob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                const a = document.createElement('a');
                a.href = url;
                a.download = `wenah-assessment-${Date.now()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                showToast('Assessment exported', 'success');
            }

            handleViewDetails() {
                if (!this.lastAssessment) {
                    showToast('Run an assessment first', 'info');
                    return;
                }

                // For now, show a modal with details
                console.log('Assessment details:', this.lastAssessment);
                showToast('Detailed view coming soon', 'info');
            }

            runInitialAnimations() {
                const gaugeCircle = document.querySelector('.risk-gauge-fill');
                const circumference = 2 * Math.PI * 80;
                const riskScore = 67;
                const offset = circumference - (riskScore / 100) * circumference;

                // Initial state
                gaugeCircle.style.strokeDasharray = `0 ${circumference}`;

                // Animate after a short delay
                setTimeout(() => {
                    gaugeCircle.style.transition = 'stroke-dasharray 1.5s ease-out';
                    gaugeCircle.style.strokeDasharray = `${circumference - offset} ${circumference}`;
                }, 500);

                // Animate stat values
                const statValues = document.querySelectorAll('.stat-value');
                statValues.forEach((stat, index) => {
                    const finalValue = stat.textContent;
                    const isPercent = finalValue.includes('%');
                    const numericValue = parseInt(finalValue);

                    stat.textContent = '0' + (isPercent ? '%' : '');

                    setTimeout(() => {
                        animateValue(stat, 0, numericValue, 1000, isPercent);
                    }, 300 + (index * 100));
                });

                // Animate breakdown bars
                const breakdownBars = document.querySelectorAll('.risk-breakdown-fill');
                breakdownBars.forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0%';
                    setTimeout(() => {
                        bar.style.transition = 'width 1s ease-out';
                        bar.style.width = width;
                    }, 800);
                });

                // Interactive hover effects for violation items
                const violationItems = document.querySelectorAll('.violation-item');
                violationItems.forEach(item => {
                    item.addEventListener('mouseenter', () => {
                        item.style.transform = 'translateX(4px)';
                    });
                    item.addEventListener('mouseleave', () => {
                        item.style.transform = 'translateX(0)';
                    });
                });
            }
        }

        // =============================================================================
        // ANIMATION HELPERS
        // =============================================================================

        function animateValue(element, start, end, duration, isPercent = false) {
            const range = end - start;
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                const current = Math.round(start + range * easeProgress);
                element.textContent = current + (isPercent ? '%' : '');

                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }

            requestAnimationFrame(update);
        }

        // =============================================================================
        // INITIALIZATION
        // =============================================================================

        document.addEventListener('DOMContentLoaded', async () => {
            const api = new WenahAPI();
            const dashboard = new DashboardController(api);
            await dashboard.initialize();

            // Make available globally for debugging
            window.wenahAPI = api;
            window.wenahDashboard = dashboard;
        });
    </script>

    <!-- Toast notification styles -->
    <style>
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--obsidian);
            border: var(--border-subtle);
            border-radius: 8px;
            padding: 12px 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            z-index: 10000;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .toast-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toast-message {
            font-size: 0.9rem;
            color: var(--pearl);
        }

        .toast-success .toast-icon { color: var(--low); }
        .toast-error .toast-icon { color: var(--critical); }
        .toast-warning .toast-icon { color: var(--high); }
        .toast-info .toast-icon { color: var(--minimal); }
    </style>
</body>
</html>
